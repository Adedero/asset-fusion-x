import{_ as D}from"./bl0oUpIY.js";import{l as j,P as R,c as a,o,a as e,b as s,L as T,n as t,r as z,w as f,J as h,U as F,q as O,T as Y,M as E,H as C,F as A,x as N,t as _,y as M,V as P}from"./BCrY3s8v.js";import{_ as V}from"./CidxsHgk.js";import{_ as q}from"./CqYo-uwL.js";import{u as K}from"./CAqHKxSD.js";import{_ as G}from"./CSISanO2.js";import{_ as H}from"./GlQ_3xON.js";import{_ as I}from"./BA4GzNlT.js";import{_ as L}from"./RTrhuSk4.js";import{t as S}from"./ChRclvJ-.js";import"./CwNR5WVR.js";import"./1c9ch5oL.js";import"./CZ2Yaa7T.js";import"./Bar4WUZu.js";import"./wc51SthY.js";const W={key:0},J={key:1,class:"space-y-4"},Q={class:"flex justify-end"},X={key:2},Z={key:0,class:"space-y-4"},ee={class:"flex justify-end"},te={key:1},oe={key:2,class:"space-y-4"},ne={class:"flex justify-end"},se={key:3,class:"space-y-4"},ae={class:"flex justify-end"},ie=j({__name:"open-account-widget",props:{accountCount:{default:0}},setup(g){const d=O(),u=R(!1),{data:r,error:m,pending:y,execute:c}=K("/api/user/profile",{key:"user-profile",immediate:!1},"$oqoo_H3-nf");async function p(){if(g.accountCount&&g.accountCount===d.public.maxAccounts){m.value=new Error(`You cannot create more than ${d.public.maxAccounts} accounts.`),m.value.name="Max accounts reached",u.value=!0;return}if(await c(),r.value?.profile?.kycStatus==="verified"){await Y({name:"user-accounts-open"});return}u.value=!0}return(b,i)=>{const l=z,k=V,$=q;return o(),a("div",null,[e("div",{class:"w-fit cursor-pointer",onClick:p},[T(b.$slots,"default",{loading:t(y)},()=>[s(l,{label:"Open an account",icon:"i-lucide-plus",color:"neutral",variant:"outline",loading:t(y)},null,8,["loading"])])]),s($,{open:t(u),"onUpdate:open":i[1]||(i[1]=v=>F(u)?u.value=v:null),title:"Account Opening Request",class:"max-w-[28rem]"},{body:f(()=>[e("div",null,[t(m)?(o(),a("div",W,[s(k,{title:t(m)?.name,message:t(m)?.message,"should-retry":"",onRetry:i[0]||(i[0]=v=>t(c)())},null,8,["title","message"])])):t(r)?.profile?(o(),a("div",X,[t(r).profile.kycStatus?t(r).profile.kycStatus==="pending"?(o(),a("div",te," Sorry, you cannot open an account at this time because your KYC document is still being verified. Try again later ")):t(r).profile.kycStatus==="rejected"?(o(),a("div",oe,[i[4]||(i[4]=e("p",null," Sorry, you cannot open an account at this time because your KYC data has been rejected. Please contact us to know more. ",-1)),e("div",ne,[s(l,{to:"/user/contact",label:"Contact us",color:"neutral",variant:"outline"})])])):t(r).profile.kycStatus==="resubmit"?(o(),a("div",se,[i[5]||(i[5]=e("p",null," Sorry, you cannot open an account at this time because your KYC data needs to be resubmitted. ",-1)),e("div",ae,[s(l,{to:"/user/profile/kyc",label:"Resubmit KYC data",color:"neutral",variant:"outline"})])])):h("",!0):(o(),a("div",Z,[i[3]||(i[3]=e("p",null," Sorry, you cannot open an account at this time because your KYC data has not been submitted. ",-1)),e("div",ee,[s(l,{to:"/user/profile/kyc",label:"Submit KYC data",color:"neutral",variant:"outline"})])]))])):(o(),a("div",J,[i[2]||(i[2]=e("p",null,"To create an account, you need to update your profile.",-1)),e("div",Q,[s(l,{to:"/user/profile",label:"Update profile",color:"neutral",variant:"outline"})])]))])]),_:1},8,["open"])])}}}),re=Object.assign(ie,{__name:"UserOpenAccountWidget"}),le={key:0},ce={key:0,class:"h-96"},ue={class:"fluid flex-col-center gap-4 text-muted"},de={key:1},me={class:"flex justify-end mb-4"},pe={class:"grid gap-4 md:grid-cols-[repeat(auto-fill,minmax(28rem,1fr))]"},_e={class:"mb-2 flex items-start gap-2 justify-between"},fe={class:"border-2 border-accented rounded-md py-1 px-2 flex items-center gap-2"},ye={class:"card-title"},ve={class:"flex flex-wrap items-end justify-end gap-x-2 gap-y-1 md:hidden"},xe={class:"space-x-2 hidden md:block"},he={class:"flex items-center gap-2 justify-between"},ge={class:"font-geist-mono text-muted text-[0.9rem]"},be={class:"flex gap-x-2 flex-wrap items-baseline"},ke={class:"font-geist-mono text-4xl font-semibold"},$e={class:"font-geist-mono font-semibold text-muted"},Ce={class:"text-primary/50 transition-all translate-y-10 opacity-0 group-hover:opacity-100 group-hover:translate-y-0"},we={key:0},Ae={class:"flex items-center gap-1"},Ne={key:0,class:"text-sm text-muted ml-2"},Se={key:1,class:"text-sm text-muted ml-2"},w=3,qe=j({__name:"index",async setup(g){let d,u;const{data:r,error:m,refresh:y}=([d,u]=E(()=>K("/api/user/financial-accounts",{key:"user-financial-accounts"},"$KNFfQeeoyo")),d=await d,u(),d);return(c,p)=>{const b=D,i=re,l=G,k=M,$=P,v=H,U=I,B=L;return o(),C(B,{error:t(m),onRetry:p[0]||(p[0]=n=>t(y)())},{default:f(()=>[t(r)?(o(),a("div",le,[t(r).financialAccounts.length?(o(),a("div",de,[e("header",me,[s(i,{"account-count":t(r).financialAccounts.length},null,8,["account-count"])]),e("div",pe,[(o(!0),a(A,null,N(t(r).financialAccounts,n=>(o(),C(U,{key:n.id,class:"cursor-context-menu transition-colors hover:bg-muted/70! group",onClick:x=>("navigateTo"in c?c.navigateTo:t(Y))(`/user/accounts/${n.id}`)},{footer:f(()=>[n.primaryUser?(o(),a("footer",we,[e("div",Ae,[s(v,{size:"xl"},{default:f(()=>[(o(!0),a(A,null,N([n.primaryUser,...n.users],x=>(o(),C($,{key:x.id,alt:x.name,src:x.image??void 0},null,8,["alt","src"]))),128))]),_:2},1024),n.userCount===1?(o(),a("span",Ne,"You")):n.userCount-w>0?(o(),a("span",Se," +"+_(`${n.userCount-w} ${n.userCount-w===1?"other":"others"}`),1)):h("",!0)])])):h("",!0)]),default:f(()=>[e("div",null,[e("header",_e,[e("div",null,[e("div",fe,[p[1]||(p[1]=e("div",{class:"w-2 h-2 bg-success rounded-full"},null,-1)),e("p",ye,_(n.name),1)])]),e("div",ve,[s(l,{size:"sm",variant:"soft",label:n.ownership},null,8,["label"]),s(l,{size:"sm",variant:"soft",color:"error",label:n.type},null,8,["label"])]),e("div",xe,[s(l,{variant:"soft",label:n.ownership},null,8,["label"]),s(l,{variant:"soft",color:"error",label:n.type},null,8,["label"])])]),e("div",he,[e("div",null,[e("p",ge,_(n.number),1),e("div",be,[e("p",ke,_(("toDollar"in c?c.toDollar:t(S))(n.balance)),1),e("p",$e," +"+_(("toDollar"in c?c.toDollar:t(S))(n.totalProfit)),1)])]),e("div",Ce,[s(k,{size:"3rem",name:"lucide-circle-arrow-right"})])])])]),_:2},1032,["onClick"]))),128))])])):(o(),a("div",ce,[e("div",ue,[s(b,{label:"No accounts",size:"100px"}),s(i)])]))])):h("",!0)]),_:1},8,["error"])}}});export{qe as default};
