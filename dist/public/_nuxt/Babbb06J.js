import{_ as M}from"./CSISanO2.js";import{_ as R}from"./CAVsKYHD.js";import{_ as q}from"./C-8w8vkN.js";import{_ as E}from"./RTrhuSk4.js";import{u as T}from"./mHVIAYtm.js";import{l as U,du as Y,dy as A,E as u,M as g,H as P,w as S,n as a,o as _,c as F,J as H,a as f,b as y,N as j,U as z,h as l,T as J}from"./BCrY3s8v.js";import{u as v}from"./CAqHKxSD.js";import{t as O}from"./ChRclvJ-.js";import{t as X}from"./-7KF7Ksm.js";import{g as G}from"./BIpI0Us3.js";import"./CidxsHgk.js";import"./CwNR5WVR.js";import"./wc51SthY.js";const L={key:0,class:"flex w-full flex-1 gap-1 overflow-auto"},Q={class:"flex-1"},W={class:"flex justify-center border-t border-default pt-4"},h=20,pe=U({__name:"index",async setup(Z){let s,o;const n=T().getParams("accountId"),i=Y(),x=A(),r=u({get:()=>Number(i.query.page||1),set:e=>{x.replace({query:{...i.query,page:e}})}}),V=u(()=>({page:r.value,limit:h})),{data:d,error:$}=([s,o]=g(()=>v(`/api/user/financial-accounts/${n}`,{pick:["totalInvestments"]},"$cnUT7A4Etu")),s=await s,o(),s),{pending:N,data:m,error:w,refresh:C}=([s,o]=g(()=>v(`/api/user/financial-accounts/${n}/investments`,{query:V},"$toBHVu2aOX")),s=await s,o(),s),D=u(()=>m.value?.map(e=>({id:e.id,deposit:e.deposit,name:e.investmentName,category:e.category,status:e.status,date:e.createdAt}))),B=M,I=[{accessorKey:"id",header:"ID",cell:({row:e})=>{const t=e.getValue("id")||"",c=t.length>8?t.slice(0,8).toUpperCase()+"...":t;return l("div",{title:t},c)}},{accessorKey:"deposit",header:"Deposit",cell:({row:e})=>O(e.getValue("deposit"))},{accessorKey:"name",header:"Name"},{accessorKey:"category",header:"Category",cell:({row:e})=>l("div",{class:"capitalize"},X(e.getValue("category"),"sentence"))},{accessorKey:"status",header:"Status",cell:({row:e})=>{const t=G(e.getValue("status"));return l(B,{variant:"subtle",color:t},()=>e.getValue("status"))}},{accessorKey:"date",header:"Date",cell:({row:e})=>j(e.getValue("date"),"MMM-DD-YYYY, hh:mm aa").value}];async function b(e){const t=e.getValue("id");await J(`/user/accounts/${n}/investments/${t}`)}return(e,t)=>{const c=R,k=q,K=E;return _(),P(K,{error:a(w)||a($),onRefresh:t[1]||(t[1]=p=>a(C)())},{default:S(()=>[a(d)&&a(m)?(_(),F("div",L,[f("div",Q,[y(c,{data:a(D),columns:I,sticky:"",loading:a(N),onSelect:b},null,8,["data","loading"]),f("div",W,[y(k,{page:a(r),"onUpdate:page":t[0]||(t[0]=p=>z(r)?r.value=p:null),total:a(d)?.totalInvestments,"items-per-page":h,"show-edges":""},null,8,["page","total"])])])])):H("",!0)]),_:1},8,["error"])}}});export{pe as default};
