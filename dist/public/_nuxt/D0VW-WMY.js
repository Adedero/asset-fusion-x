import{_ as $}from"./CSISanO2.js";import{_ as z}from"./CidxsHgk.js";import{_ as S}from"./noFtHZsG.js";import{_ as T,a as B}from"./Bkd0wxOE.js";import{_ as C}from"./Bz1yoids.js";import{_ as E}from"./A1aqh1bs.js";import{l as F,du as A,S as U,P as I,f as M,T as d,c as P,J as m,n as e,a as f,b as o,w as s,o as u,H as w,W as q,r as H,d as J}from"./BCrY3s8v.js";import{_ as W}from"./BA4GzNlT.js";import{z as p}from"./BoqIIjWt.js";import{a as D}from"./C3npS8vC.js";import{n as G}from"./wc51SthY.js";import{t as K}from"./-7KF7Ksm.js";import"./CwNR5WVR.js";import"./Df43cr2Y.js";import"./IDdVFqQ_.js";import"./DGxpg-Ox.js";import"./1c9ch5oL.js";import"./CpLtEdiG.js";import"./8tY1C0Fy.js";import"./CHIgUVhi.js";import"./Bar4WUZu.js";import"./jFYhBC76.js";import"./CZ2Yaa7T.js";import"./D8mweQSH.js";import"./BsY6ekDi.js";import"./DSCz-RR9.js";const L={key:0,class:"fluid"},Q={class:"fluid flex-center"},X={class:"flex items-center gap-2"},Ve=F({__name:"index",setup(Y){const h=A(),i=h.params?.accountType?.toString(),a=h.params?.accountOwnership?.toString(),b=p.object({accountName:p.string().min(3,{message:"Account name is required."}),jointOwnershipRole:p.string().optional(),jointOwnership:p.number().nonnegative({message:"Ownership cannot be negative"}).max(100,{message:"Ownership cannot be more than 100%"}).optional()}),n=U({accountName:""});function x(){n.accountName=""}const c=I(null);async function N(l){c.value=null;try{await $fetch("/api/user/financial-accounts",{method:"POST",headers:{"Content-Type":"application/json"},body:{...l.data,jointOwnershipRole:l.data.jointOwnershipRole?K(l.data.jointOwnershipRole,"snake"):void 0,accountType:i,accountOwnership:a}}),x(),await d("/user/accounts")}catch(t){c.value=G(t)}}return M(async()=>{if(i!=="personal"&&i!=="business"){await d("/users/accounts/open");return}if(a!=="single"&&a!=="joint"){await d("/users/accounts/open");return}}),(l,t)=>{const g=$,O=z,y=S,_=B,j=C,V=E,v=H,R=T,k=W;return e(a)&&e(i)?(u(),P("div",L,[f("div",Q,[o(k,{class:"md:w-96"},{header:s(()=>[t[3]||(t[3]=f("h1",{class:"text-2xl font-semibold mb-2"},"Open your account",-1)),f("div",X,[o(g,{size:"lg",label:e(a),variant:"soft"},null,8,["label"]),o(g,{size:"lg",label:e(i),variant:"soft",color:"error"},null,8,["label"])])]),default:s(()=>[e(c)?(u(),w(O,{key:0,message:e(c).message,class:"mb-4"},null,8,["message"])):m("",!0),o(R,{schema:e(b),state:e(n),class:"space-y-4",onSubmit:q(N,["prevent"])},{default:s(()=>[o(_,{label:"Account Name",name:"accountName",description:"Enter a name for your account"},{default:s(()=>[o(y,{modelValue:e(n).accountName,"onUpdate:modelValue":t[0]||(t[0]=r=>e(n).accountName=r),size:"lg",class:"w-full"},null,8,["modelValue"])]),_:1}),e(a)==="joint"?(u(),w(_,{key:0,name:"jointOwnershipRole",label:"Role",description:"Enter your specific role"},{default:s(()=>[o(j,{modelValue:e(n).jointOwnershipRole,"onUpdate:modelValue":t[1]||(t[1]=r=>e(n).jointOwnershipRole=r),items:e(D),size:"lg",class:"w-full"},null,8,["modelValue","items"])]),_:1})):m("",!0),e(a)==="joint"?(u(),w(_,{key:1,name:"jointOwnership",label:"Ownership",description:"The percentage of this account you own"},{default:s(()=>[o(V,{modelValue:e(n).jointOwnership,"onUpdate:modelValue":t[2]||(t[2]=r=>e(n).jointOwnership=r),min:1,max:100,size:"lg",class:"w-full"},null,8,["modelValue"])]),_:1})):m("",!0),o(v,{type:"submit",class:"mt-2 w-full flex-center",size:"lg",icon:"i-lucide-check-circle","loading-auto":""},{default:s(()=>t[4]||(t[4]=[J(" Submit ")])),_:1,__:[4]})]),_:1},8,["schema","state"])]),_:1})])])):m("",!0)}}});export{Ve as default};
