import{_ as b}from"./BZPumJrv.js";import{l as $,P as g,a4 as y,R as A,S as v,c as w,b as t,w as n,o as C,W as S,n as a,r as B}from"./CVwvMgBG.js";import{_ as V}from"./UoBorrl-.js";import{_ as j,a as k}from"./D7s51L10.js";import{_ as E}from"./C5cbwpr9.js";import{z as m}from"./B_lSGf9J.js";import{n as F}from"./CftSbWNE.js";import{u as I}from"./CA--58-j.js";import"./D_ajDymQ.js";import"./Bgc-ZZWy.js";const q={class:"space-y-4"},K=$({__name:"settings",setup(z){const i=I().getParams("accountId"),c=g(y("currentAccount",{accountName:"",refreshAccount:async()=>{}})),u=A(),l=m.object({accountName:m.string("Account name is required").nonempty("Account name is required").refine(o=>o!==c.value.accountName,"Account name not changed")}),s=v({accountName:""}),_=async o=>{const{accountName:e}=o.data;try{await $fetch(`/api/user/financial-accounts/${i}`,{method:"put",body:{name:e}}),u.add({color:"success",title:"Success",description:"Account name changed successfully"}),c.value.accountName=e,c.value.refreshAccount()}catch(r){u.add({color:"error",title:"Error",description:F(r).message})}};return(o,e)=>{const r=b,d=B,p=V,f=k,N=j,h=E;return C(),w("div",q,[t(h,null,{default:n(()=>[t(N,{state:a(s),schema:a(l),onSubmit:S(_,["prevent"])},{default:n(()=>[t(f,{label:"Change account name",description:`Current account name: ${a(c).accountName}`,name:"accountName"},{default:n(()=>[t(p,{class:"w-full"},{default:n(()=>[t(r,{modelValue:a(s).accountName,"onUpdate:modelValue":e[0]||(e[0]=x=>a(s).accountName=x),class:"flex-1"},null,8,["modelValue"]),t(d,{type:"submit",label:"Submit",icon:"i-lucide-circle-check","loading-auto":""})]),_:1})]),_:1},8,["description"])]),_:1},8,["state","schema"])]),_:1})])}}});export{K as default};
