import{e as L,aJ as A,aG as B,s as v,E as m,l as z,h as F,cO as $,H as w,J as E,n as y,o as H,w as P,b as O,r as q,a as V,a7 as J}from"./CVwvMgBG.js";function j(e,t){const n=t/e*100;return 2/Math.PI*100*Math.atan(n/50)}function G(e={}){const{duration:t=2e3,throttle:n=200,hideDelay:r=500,resetDelay:a=400}=e,d=e.estimatedProgress||j,s=L(),i=v(0),l=v(!1),p=v(!1);let _=!1,h,k,x,D;const b=(o={})=>{I(),p.value=!1,T(0,o)};function T(o=0,u={}){if(s.isHydrating)return;if(o>=100)return f({force:u.force});g(),i.value=o<0?0:o;const c=u.force?0:n;c?k=setTimeout(()=>{l.value=!0,N()},c):(l.value=!0,N())}function M(){x=setTimeout(()=>{l.value=!1,D=setTimeout(()=>{i.value=0},a)},r)}function f(o={}){i.value=100,_=!0,g(),I(),o.error&&(p.value=!0),o.force?(i.value=0,l.value=!1):M()}function I(){clearTimeout(x),clearTimeout(D)}function g(){clearTimeout(k),cancelAnimationFrame(h)}function N(){_=!1;let o;function u(c){if(_)return;o??=c;const S=c-o;i.value=Math.max(0,Math.min(100,d(t,S))),h=requestAnimationFrame(u)}h=requestAnimationFrame(u)}let C=()=>{};{const o=s.hook("page:loading:start",()=>{b()}),u=s.hook("page:loading:end",()=>{f()}),c=s.hook("vue:error",()=>f());C=()=>{c(),o(),u(),g()}}return{_cleanup:C,progress:m(()=>i.value),isLoading:m(()=>l.value),error:m(()=>p.value),start:b,set:T,finish:f,clear:g}}function R(e={}){const t=L(),n=t._loadingIndicator||=G(e);return A()&&(t._loadingIndicatorDeps||=0,t._loadingIndicatorDeps++,B(()=>{t._loadingIndicatorDeps--,t._loadingIndicatorDeps===0&&(n._cleanup(),delete t._loadingIndicator)})),n}const U=z({name:"NuxtLoadingIndicator",props:{throttle:{type:Number,default:200},duration:{type:Number,default:2e3},hideDelay:{type:Number,default:500},resetDelay:{type:Number,default:400},height:{type:Number,default:3},color:{type:[String,Boolean],default:"repeating-linear-gradient(to right,#00dc82 0%,#34cdfe 50%,#0047e1 100%)"},errorColor:{type:String,default:"repeating-linear-gradient(to right,#f87171 0%,#ef4444 100%)"},estimatedProgress:{type:Function,required:!1}},setup(e,{slots:t,expose:n}){const{progress:r,isLoading:a,error:d,start:s,finish:i,clear:l}=R({duration:e.duration,throttle:e.throttle,hideDelay:e.hideDelay,resetDelay:e.resetDelay,estimatedProgress:e.estimatedProgress});return n({progress:r,isLoading:a,error:d,start:s,finish:i,clear:l}),()=>F("div",{class:"nuxt-loading-indicator",style:{position:"fixed",top:0,right:0,left:0,pointerEvents:"none",width:"auto",height:`${e.height}px`,opacity:a.value?1:0,background:d.value?e.errorColor:e.color||void 0,backgroundSize:`${100/r.value*100}% auto`,transform:`scaleX(${r.value}%)`,transformOrigin:"left",transition:"transform 0.1s, height 0.4s, opacity 0.4s",zIndex:999999}},t)}}),X=()=>$("color-mode").value,K=z({__name:"color-mode-toggler",props:{size:{default:"md"}},setup(e){const t=X(),n=m({get(){return t.value==="dark"},set(r){t.preference=r?"dark":"light"}});return(r,a)=>{const d=q,s=J;return y(t)?.forced?E("",!0):(H(),w(s,{key:0},{fallback:P(()=>a[1]||(a[1]=[V("div",{class:"size-8"},null,-1)])),default:P(()=>[O(d,{icon:y(n)?"i-lucide-moon":"i-lucide-sun",color:"neutral",variant:"outline",size:r.size,onClick:a[0]||(a[0]=i=>n.value=!y(n))},null,8,["icon","size"])]),_:1}))}}}),W=Object.assign(K,{__name:"ColorModeToggler"});export{U as _,W as a};
