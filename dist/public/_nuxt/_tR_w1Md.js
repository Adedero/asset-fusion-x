import{_ as N}from"./CidxsHgk.js";import{_ as y}from"./CJ_RDHPa.js";import{_ as S,a as V}from"./Bkd0wxOE.js";import{l as k,du as C,S as E,P as f,c as _,J as z,b as o,n as s,w as n,W as B,U as F,o as w,r as U,d as $,a as g}from"./BCrY3s8v.js";import{_ as R}from"./CqYo-uwL.js";import{a as h}from"./BtBUy-pL.js";import{n as M}from"./wc51SthY.js";import{b as T}from"./RZnrL4AU.js";const j={key:0,class:"mb-3"},L=k({__name:"reset-password-form",setup(q){const m=C().query.token?.toString(),t=E({password:"",confirmPassword:""});function x(){t.password="",t.confirmPassword=""}const a=f(null),l=f(!1);async function b(u){if(a.value=null,!m){a.value=new Error("Invalid or expired token. Try again later.");return}const{password:e}=u.data;await h.resetPassword({newPassword:e,token:m},{onError(i){a.value=M(i.error)},onSuccess(){x(),l.value=!0}})}return(u,e)=>{const i=N,c=y,d=V,p=U,P=S,v=R;return w(),_("div",null,[s(a)?(w(),_("div",j,[o(i,{message:s(a).message},null,8,["message"])])):z("",!0),o(P,{schema:s(T),state:s(t),class:"space-y-4",onSubmit:B(b,["prevent"])},{default:n(()=>[o(d,{label:"New Password",name:"password"},{default:n(()=>[o(c,{modelValue:s(t).password,"onUpdate:modelValue":e[0]||(e[0]=r=>s(t).password=r),size:"lg",class:"w-full"},null,8,["modelValue"])]),_:1}),o(d,{label:"Confirm New Password",name:"confirmPassword"},{default:n(()=>[o(c,{modelValue:s(t).confirmPassword,"onUpdate:modelValue":e[1]||(e[1]=r=>s(t).confirmPassword=r),size:"lg",class:"w-full"},null,8,["modelValue"])]),_:1}),o(p,{type:"submit",class:"mt-2 w-full flex-center",size:"lg",icon:"i-lucide-check-circle","loading-auto":""},{default:n(()=>e[3]||(e[3]=[$(" Submit ")])),_:1,__:[3]})]),_:1},8,["schema","state"]),o(v,{open:s(l),"onUpdate:open":e[2]||(e[2]=r=>F(l)?l.value=r:null),title:"Success",close:!1,dismissible:!1,ui:{footer:"justify-end"}},{body:n(()=>e[4]||(e[4]=[g("div",{class:"space-y-3"},[g("p",null," Your password has been reset successfully! Sign in now to continue. ")],-1)])),footer:n(()=>[o(p,{to:{name:"sign-in"},label:"Sign in","trailing-icon":"lucide-circle-arrow-right"})]),_:1},8,["open"])])}}});export{L as _};
