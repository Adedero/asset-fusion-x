import{_ as b}from"./uAYkovRb.js";import{_ as V}from"./C5cbwpr9.js";import{_ as h}from"./BaciPMwD.js";import{_ as C}from"./cD6ri7Sn.js";import{_ as v,a as N}from"./D7s51L10.js";import{l as S,R as E,S as k,P as B,c as $,b as s,w as a,o as p,W as F,n as e,a as w,H as T,J as U,r as z,T as A}from"./CVwvMgBG.js";import{z as u}from"./B_lSGf9J.js";import{a as M}from"./poyWHrki.js";import{a as j}from"./Ct8ysQ5s.js";import"./mGNbPSyX.js";import"./BZPumJrv.js";import"./D_ajDymQ.js";import"./Bgc-ZZWy.js";import"./C3npS8vC.js";const q={class:"flex-center h-full"},os=S({__name:"index",setup(H){const f=E(),_=u.object({currentPassword:u.string({message:"Enter your old password"}).nonempty({message:"Password is required"}),password:j,confirmPassword:u.string({message:"Confirm your password"})}).refine(t=>t.password===t.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]}),r=k({currentPassword:"",password:"",confirmPassword:""}),m=B(""),P=async t=>{const{currentPassword:o,password:c}=t.data;await M.changePassword({newPassword:c,currentPassword:o,revokeOtherSessions:!0},{onError:l=>{m.value=l.error.message},onSuccess:()=>{f.add({color:"success",title:"Success",description:"Password changed successfully"}),A("/sign-in")}})};return(t,o)=>{const c=b,l=V,g=h,d=C,i=N,x=z,y=v;return p(),$("div",q,[s(l,{class:"w-full max-w-96"},{header:a(()=>[s(l,{class:"w-fit",variant:"subtle",ui:{body:"p-2.5 sm:p-2.5"}},{default:a(()=>[s(c,{size:"32"})]),_:1})]),default:a(()=>[s(y,{state:e(r),schema:e(_),class:"space-y-4",onSubmit:F(P,["prevent"])},{default:a(()=>[o[3]||(o[3]=w("p",{class:"text-xl font-semibold"},"Change Password",-1)),e(m)?(p(),T(g,{key:0,message:e(m)},null,8,["message"])):U("",!0),s(i,{name:"currentPassword",label:"Current Password",description:"Enter your current password",class:"w-full"},{default:a(()=>[s(d,{modelValue:e(r).currentPassword,"onUpdate:modelValue":o[0]||(o[0]=n=>e(r).currentPassword=n),class:"w-full"},null,8,["modelValue"])]),_:1}),s(i,{name:"password",label:"Password",description:"Enter your new password",class:"w-full"},{default:a(()=>[s(d,{modelValue:e(r).password,"onUpdate:modelValue":o[1]||(o[1]=n=>e(r).password=n),class:"w-full"},null,8,["modelValue"])]),_:1}),s(i,{name:"confirmPassword",label:"Confirm Password",description:"Verify your password so you're sure",class:"w-full"},{default:a(()=>[s(d,{modelValue:e(r).confirmPassword,"onUpdate:modelValue":o[2]||(o[2]=n=>e(r).confirmPassword=n),class:"w-full"},null,8,["modelValue"])]),_:1}),w("div",null,[s(x,{class:"w-full flex-center",type:"submit",label:"Submit","loading-auto":"","trailing-icon":"i-lucide-circle-arrow-right"})])]),_:1,__:[3]},8,["state","schema"])]),_:1})])}}});export{os as default};
