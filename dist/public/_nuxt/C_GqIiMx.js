import{_ as U}from"./CSISanO2.js";import{l as z,du as K,dy as O,E as x,H as g,o as r,w as C,a as s,c as d,J as m,n as e,b as p,y as H,N as f,U as J,h as L,T as G,M as X,t as i,r as Q,V as W,F as Z,x as tt,I as S,d as et}from"./BCrY3s8v.js";import{_ as st}from"./CqYo-uwL.js";import{_ as E}from"./BA4GzNlT.js";import{_ as at}from"./CidxsHgk.js";import{_ as ot}from"./CAVsKYHD.js";import{_ as nt}from"./C-8w8vkN.js";import{n as lt}from"./wc51SthY.js";import{u as F}from"./mHVIAYtm.js";import{u as j}from"./CAqHKxSD.js";import{t as I}from"./ChRclvJ-.js";import{a as rt}from"./9ThFSRxC.js";import{_ as it}from"./RTrhuSk4.js";import{t as h}from"./-7KF7Ksm.js";import{a as B,g as V}from"./BIpI0Us3.js";import"./1c9ch5oL.js";import"./CZ2Yaa7T.js";import"./Bar4WUZu.js";import"./CwNR5WVR.js";const ut={class:"mt-4 flex overflow-auto"},ct={key:0,class:"flex-center"},dt={class:"flex justify-center border-t border-default pt-4"},T=20,mt=z({__name:"investment-profits",props:{investmentId:{},profitCount:{}},setup(P){const _=F().getParams("accountId"),b=K(),M=O(),v=x({get:()=>Number(b.query.page||1),set:n=>{M.replace({query:{...b.query,page:n}})}}),$=x(()=>({page:v.value,limit:T})),{pending:D,data:Y,error:t,refresh:A}=j(`/api/user/financial-accounts/${_}/investments/${P.investmentId}/profits`,{query:$},"$XjbUTppJhl"),o=x(()=>Y.value?.map(n=>({id:n.id,amount:n.USDAmount,status:n.status,date:n.createdAt}))??[]),a=U,c=[{accessorKey:"id",header:"ID",cell:({row:n})=>{const l=n.getValue("id")||"";return l.length>12?l.slice(0,12).toUpperCase()+"...":l}},{accessorKey:"amount",header:"Amount",cell:({row:n})=>I(n.getValue("amount"))},{accessorKey:"status",header:"Status",cell:({row:n})=>{const l=rt(n.getValue("status"));return L(a,{variant:"subtle",color:l},()=>n.getValue("status"))}},{accessorKey:"date",header:"Date",cell:({row:n})=>f(n.getValue("date"),"MMM DD, YYYY").value}];async function y(n){const l=n.getValue("id");await G(`/user/accounts/${_}/transactions/${l}`)}return(n,l)=>{const k=H,N=at,w=ot,u=nt,q=E;return r(),g(q,null,{default:C(()=>[l[2]||(l[2]=s("header",null,[s("p",{class:"card-title"},"Profits")],-1)),s("div",ut,[e(D)?(r(),d("div",ct,[p(k,{name:"lucide:loader",size:"2rem",class:"animate animate-spin"})])):e(t)?(r(),g(N,{key:1,message:e(lt)(e(t)).message,"show-retry":"",onRetry:l[0]||(l[0]=R=>e(A)())},null,8,["message"])):e(Y)?(r(),g(w,{key:2,data:e(o),columns:c,loading:e(D),class:"w-full",onSelect:y},null,8,["data","loading"])):m("",!0)]),s("div",dt,[p(u,{page:e(v),"onUpdate:page":l[1]||(l[1]=R=>J(v)?v.value=R:null),total:n.profitCount,"items-per-page":T,"show-edges":""},null,8,["page","total"])])]),_:1,__:[2]})}}}),pt=Object.assign(mt,{__name:"UserInvestmentProfits"}),vt={key:0,class:"mb-4"},_t={class:"flex items-center gap-4 justify-between"},ft={class:"space-y-2"},gt={class:"flex flex-wrap gap-2"},bt={class:"text-2xl font-semibold"},yt={class:"space-y-4"},ht={class:"flex-col-center gap-1"},Ct={class:"text-2xl font-semibold"},It={class:"capitalize card-title"},xt={class:"text-xs mt-2"},$t={key:0},Dt={key:1},Yt={key:2},Mt={key:3},At={key:4},kt={key:5},Nt={class:"flex items-center gap-2"},wt={class:"card-title"},Pt={class:"mt-6 space-y-4"},Rt={class:"grid gap-4 md:grid-cols-[repeat(auto-fit,minmax(20rem,1fr))] xl:grid-cols-3"},St={class:"mt-2 text-2xl font-semibold font-geist-mono"},Bt={key:0,class:"text-sm"},Vt={class:"mt-2"},se=z({__name:"[investmentId]",async setup(P){let _,b;const[M,v]=F().getParams(["accountId","investmentId"]),{data:$,error:D,refresh:Y}=([_,b]=X(()=>j(`/api/user/financial-accounts/${M}/investments/${v}`,"$TreItGH8lM")),_=await _,b(),_),t=x(()=>({...$.value?.investment,lastProfit:$.value?.investment.transactions[0]})),A=x(()=>{if(!t.value)return[];let o="";const a="No data available";switch(t.value.status){case"open":o=t.value.createdAt?`Opened at ${c(t.value.createdAt)}`:a;break;case"closed":o=t.value.closedAt?`Closed at ${c(t.value.closedAt)}`:a;break;case"paused":o=t.value.pausedAt?`Paused at ${c(t.value.pausedAt)}`:a;break;case"terminated":o=t.value.terminatedAt?`Terminated at ${c(t.value.terminatedAt)}`:a;break;default:o=a;break}function c(y){return f(y,"MMM-DD-YYYY hh:mm aa").value}return[{label:"Deposit Amount",value:I(t.value.deposit??0),description:"Investment capital",icon:"lucide:coins",badgeColor:"neutral",class:"bg-primary-500 text-white"},{label:"Expected Profit",value:I((t.value.totalReturn??0)/100*(t.value.deposit??0)),description:`${(t.value.totalReturn??0)-100}% total returns`,icon:"lucide:coins",badgeColor:"primary"},{label:"Current Profit",value:I(t.value.totalProfit??0),description:`Distributed ${h(t.value.profitDistribution??"","lower")}`,icon:"lucide:flower",badgeColor:"success"},{label:"Last Profit",value:I(t.value.lastProfit?.USDAmount??0),description:t.value.lastProfit?.createdAt?f(t.value.lastProfit?.createdAt,"MMM-DD-YYYY, hh:mm aa").value:"No profit yet",icon:"lucide:hand-coins",badgeColor:"error"},{label:"Duration",value:`${t.value.daysCompleted}/${t.value.duration}`,suffix:"days",description:"Days completed",icon:"lucide:clock",badgeColor:"primary"},{label:"Status",value:h(t.value.status??"","sentence"),description:o,icon:"lucide:info",badgeColor:"warning"}]});return(o,a)=>{const c=U,y=Q,n=st,l=W,k=E,N=pt,w=it;return r(),g(w,{error:e(D),onRefresh:a[0]||(a[0]=u=>e(Y)())},{default:C(()=>[e(t)?(r(),d("div",vt,[s("header",_t,[s("div",ft,[p(c,{label:("toCase"in o?o.toCase:e(h))(e(t).category??"","sentence"),color:"neutral",variant:"outline"},null,8,["label"]),s("div",gt,[s("h1",bt,i(e(t).investmentName),1),p(c,{label:e(t).status,color:("getInvestmentStatusBadgeColor"in o?o.getInvestmentStatusBadgeColor:e(V))(e(t).status??""),icon:("getInvestmentStatusIcon"in o?o.getInvestmentStatusIcon:e(B))(e(t).status??""),variant:"subtle"},null,8,["label","color","icon"]),p(n,{title:"Investment Details",description:e(t).investmentName,dismissible:!1},{body:C(()=>[s("div",yt,[s("header",ht,[s("p",Ct,i(e(t).investmentName),1),s("p",It,i(("toCase"in o?o.toCase:e(h))(e(t).category??"","sentence")),1),p(c,{label:("toCase"in o?o.toCase:e(h))(e(t).status??"","lower"),color:("getInvestmentStatusBadgeColor"in o?o.getInvestmentStatusBadgeColor:e(V))(e(t).status??""),icon:("getInvestmentStatusIcon"in o?o.getInvestmentStatusIcon:e(B))(e(t).status??""),variant:"subtle"},null,8,["label","color","icon"]),s("p",xt," Opened "+i(e(f)(e(t).createdAt,"MMM-DD-YYYY, hh:mm aa")),1)]),s("div",null,[e(t).pausedAt?(r(),d("div",$t,[a[1]||(a[1]=s("p",{class:"card-title"},"Paused on",-1)),s("p",null,i(e(f)(e(t).pausedAt,"MMM-DD-YYYY, hh:mm aa")),1)])):m("",!0),e(t).pausedReason?(r(),d("div",Dt,[a[2]||(a[2]=s("p",{class:"card-title"},"Reason for pause",-1)),s("p",null,i(e(t).pausedReason),1)])):m("",!0),e(t).closedAt?(r(),d("div",Yt,[a[3]||(a[3]=s("p",{class:"card-title"},"Closed on",-1)),s("p",null,i(e(f)(e(t).closedAt,"MMM-DD-YYYY, hh:mm aa")),1)])):m("",!0),e(t).closedReason?(r(),d("div",Mt,[a[4]||(a[4]=s("p",{class:"card-title"},"Reason for closure",-1)),s("p",null,i(e(t).closedReason),1)])):m("",!0),e(t).terminatedAt?(r(),d("div",At,[a[5]||(a[5]=s("p",{class:"card-title"},"Terminated on",-1)),s("p",null,i(e(f)(e(t).terminatedAt,"MMM-DD-YYYY, hh:mm aa")),1)])):m("",!0),e(t).terminatedReason?(r(),d("div",kt,[a[6]||(a[6]=s("p",{class:"card-title"},"Reason for termination",-1)),s("p",null,i(e(t).terminatedReason),1)])):m("",!0)])])]),default:C(()=>[p(y,{label:"More",size:"sm",variant:"subtle","trailing-icon":"lucide:ellipsis"})]),_:1},8,["description"])]),s("div",Nt,[p(l,{src:e(t).investor?.user?.image??void 0,alt:e(t).investor?.user?.name,size:"lg"},null,8,["src","alt"]),s("div",null,[a[7]||(a[7]=s("p",{class:"text-xs text-muted"},"Created by",-1)),s("p",wt,i(e(t).investor?.user?.name),1)])])])]),s("div",Pt,[s("div",Rt,[(r(!0),d(Z,null,tt(e(A),u=>(r(),g(k,{key:u.label,class:S(u.class)},{default:C(()=>[s("header",null,[s("p",{class:S(["card-title",u.class?"text-white":""])},i(u.label),3)]),s("div",St,[et(i(u.value)+" ",1),u.suffix?(r(),d("span",Bt,i(u.suffix),1)):m("",!0)]),s("footer",Vt,[p(c,{color:u.badgeColor,variant:"soft",class:"mr-2 dark:bg-white dark:text-primary",icon:u.icon},null,8,["color","icon"]),s("small",null,i(u.description),1)])]),_:2},1032,["class"]))),128))]),e(v)?(r(),g(N,{key:0,"investment-id":e(v),"profit-count":e(t).profitCount??1e4},null,8,["investment-id","profit-count"])):m("",!0)])])):m("",!0)]),_:1},8,["error"])}}});export{se as default};
