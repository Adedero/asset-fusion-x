import{l as F,R as V,M as P,E as I,P as q,H as p,w as c,n as o,o as a,c as _,J as f,F as T,x as J,a as e,t as i,d as w,N as A,b as n,r as S,V as H}from"./BCrY3s8v.js";import{_ as L}from"./CSISanO2.js";import{_ as Q}from"./CidxsHgk.js";import{_ as G}from"./CqYo-uwL.js";import{_ as K}from"./BA4GzNlT.js";import{_ as O}from"./bl0oUpIY.js";import{_ as U}from"./RTrhuSk4.js";import{t as W}from"./-7KF7Ksm.js";import{n as N}from"./wc51SthY.js";import{u as X}from"./CAqHKxSD.js";import"./CwNR5WVR.js";import"./1c9ch5oL.js";import"./CZ2Yaa7T.js";import"./Bar4WUZu.js";const Z={key:0},ee={key:0,class:"grid gap-4 md:grid-cols-[repeat(auto-fill,minmax(24rem,1fr))]"},te={class:"flex items-center gap-2"},se={class:"text-sm text-muted"},oe={class:"text-xs text-muted"},ne={class:"space-y-2"},ae={class:"text-3xl font-medium"},re={class:"text-xs"},ce={key:0,class:"text-xs"},le={class:"text-muted"},ie={class:"flex justify-end"},ue={class:"text-muted text-xs"},de={class:"flex items-center gap-2 justify-end"},_e={class:"space-y-4"},me={class:"flex items-center justify-end gap-2"},pe={class:"space-y-4"},fe={class:"flex items-center justify-end gap-2"},xe={key:1,class:"h-60 fluid flex-col-center gap-4 text-muted"},Me=F({__name:"join-requests",async setup(he){let m,g;const R=V(),{data:k,error:Y,refresh:x}=([m,g]=P(()=>X("/api/user/join-requests",{key:"user-join-requests"},"$IYoQR3Tu0J")),m=await m,g(),m),C=I(()=>k.value?.map(r=>({...r,loading:!1}))??[]),h=q(null);async function M(r,t){try{await $fetch(`/api/user/join-requests/${r.id}/accept`,{method:"post"}),R.add({color:"success",title:"Success",description:"You are now an account member."}),await x(),t()}catch(u){h.value=N(u)}}const v=q(null);async function E(r,t){try{await $fetch(`/api/user/join-requests/${r.id}`,{method:"delete"}),await x(),t()}catch(u){v.value=N(u)}}return(r,t)=>{const u=H,b=L,l=S,$=Q,j=G,B=K,D=O,z=U;return a(),p(z,{error:o(Y),onRefresh:t[0]||(t[0]=s=>o(x)())},{default:c(()=>[o(k)?(a(),_("div",Z,[o(C).length>0?(a(),_("div",ee,[(a(!0),_(T,null,J(o(C),s=>(a(),p(B,{key:s.id},{header:c(()=>[e("div",te,[n(u,{src:s.creator.image??void 0,alt:s.creator.name,size:"lg"},null,8,["src","alt"]),e("div",null,[e("p",se,[t[1]||(t[1]=w(" Invited by ")),e("b",null,i(s.creator.name),1)]),e("p",oe,i(s.creator.email),1)])])]),footer:c(()=>[e("div",null,[e("div",de,[n(j,{title:"Account Request"},{body:c(({close:d})=>[e("div",_e,[t[4]||(t[4]=e("p",null,"Are you sure you want to reject this request?",-1)),o(v)?(a(),p($,{key:0,message:o(v).message},null,8,["message"])):f("",!0),e("div",me,[n(l,{color:"neutral",variant:"soft",label:"Cancel",onClick:y=>d()},null,8,["onClick"]),n(l,{color:"error",label:"Proceed","loading-auto":"",onClick:y=>E(s,d)},null,8,["onClick"])])])]),default:c(()=>[n(l,{color:"error",variant:"soft",icon:"lucide-circle-x",size:"sm",label:"Reject"})]),_:2},1024),n(j,{title:"Account Request"},{body:c(({close:d})=>[e("div",pe,[t[5]||(t[5]=e("p",null,"Are you sure you want to accept this request?",-1)),o(h)?(a(),p($,{key:0,message:o(h).message},null,8,["message"])):f("",!0),e("div",fe,[n(l,{color:"neutral",variant:"soft",label:"Cancel",onClick:y=>d()},null,8,["onClick"]),n(l,{label:"Proceed","loading-auto":"",onClick:y=>M(s,d)},null,8,["onClick"])])])]),default:c(()=>[n(l,{label:"Accept",size:"sm",icon:"lucide-circle-check"})]),_:2},1024)])])]),default:c(()=>[e("div",ne,[e("header",null,[e("h3",ae,i(s.financialAccount.name),1),e("p",re,[t[2]||(t[2]=w(" Created ")),e("b",null,i(o(A)(s.financialAccount.createdAt,"MMM DD, YYYY")),1)])]),e("div",null,[n(b,{variant:"soft",label:("toCase"in r?r.toCase:o(W))(s.role,"sentence")},null,8,["label"]),n(b,{color:"success",variant:"soft",label:s.ownership+"% ownership",class:"ml-2"},null,8,["label"])]),s.description?(a(),_("div",ce,[t[3]||(t[3]=e("p",{class:"underline"},"Added note",-1)),e("p",le,i(s.description),1)])):f("",!0),e("div",ie,[e("p",ue," Request sent on "+i(o(A)(s.createdAt,"MMM DD, YYYY hh:mm aa")),1)])])]),_:2},1024))),128))])):(a(),_("div",xe,[n(D,{label:"No requests",size:"100px"})]))])):f("",!0)]),_:1},8,["error"])}}});export{Me as default};
