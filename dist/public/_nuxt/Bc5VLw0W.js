import{_ as y}from"./uAYkovRb.js";import{_ as E}from"./C5cbwpr9.js";import{_ as C}from"./BaciPMwD.js";import{_ as S}from"./mGNbPSyX.js";import{_ as V}from"./BZPumJrv.js";import{_ as $,a as B}from"./D7s51L10.js";import{l as A,S as F,P as u,c as M,b as t,w as o,o as c,W as z,n as e,a as _,H as p,J as I,r as L}from"./CVwvMgBG.js";import{z as f}from"./B_lSGf9J.js";import{a as U}from"./poyWHrki.js";import"./D_ajDymQ.js";import"./Bgc-ZZWy.js";const j={class:"flex-center h-full"},X=A({__name:"index",setup(H){const d=f.object({email:f.email({message:"Invalid email"})}),l=F({email:""}),s=u(),n=u(),x=async m=>{const{email:a}=m.data;s.value=void 0,n.value=void 0,await U.changeEmail({newEmail:a,callbackURL:"/change-email/verification"},{onError:i=>{s.value=i.error.message},onSuccess:()=>{n.value="A link has been sent to your current email. Click on the link to continue."}})};return(m,a)=>{const i=y,r=E,b=C,h=S,v=V,w=B,g=L,N=$;return c(),M("div",j,[t(r,{class:"w-full max-w-96"},{header:o(()=>[t(r,{class:"w-fit",variant:"subtle",ui:{body:"p-2.5 sm:p-2.5"}},{default:o(()=>[t(i,{size:"32"})]),_:1})]),default:o(()=>[t(N,{state:e(l),schema:e(d),class:"space-y-4",onSubmit:z(x,["prevent"])},{default:o(()=>[a[1]||(a[1]=_("p",{class:"text-xl font-semibold"},"Change Email",-1)),e(s)?(c(),p(b,{key:0,message:e(s)},null,8,["message"])):e(n)?(c(),p(h,{key:1,title:"Successful",description:e(n),color:"success",variant:"subtle"},null,8,["description"])):I("",!0),t(w,{name:"email",label:"New Email",description:"Enter your new email",class:"w-full"},{default:o(()=>[t(v,{modelValue:e(l).email,"onUpdate:modelValue":a[0]||(a[0]=k=>e(l).email=k),class:"w-full"},null,8,["modelValue"])]),_:1}),_("div",null,[t(g,{class:"w-full flex-center",type:"submit",label:"Submit","loading-auto":"","trailing-icon":"i-lucide-circle-arrow-right"})])]),_:1,__:[1]},8,["state","schema"])]),_:1})])}}});export{X as default};
