import{_ as N}from"./CidxsHgk.js";import{l as w,du as $,R,P as S,f as V,aI as A,c as l,a as e,t as v,n as s,b as o,J as B,d,w as g,r as T,_ as h,o as u,q}from"./BCrY3s8v.js";import{_ as D}from"./CwNR5WVR.js";import{_ as I}from"./GUhg-1-n.js";import{d as L}from"./IDdVFqQ_.js";import{a as M}from"./BtBUy-pL.js";function Y(n,m=5){if(!n)return"";const[a,i]=n.split("@");return!a||!i?n:`${a.slice(0,3)}${"*".repeat(m)}@${i}`}const j={class:"text-sm text-muted"},z={class:"my-5"},F={key:0},J={key:1},P={key:0,class:"flex items-center gap-1 flex-wrap"},U={class:"mt-4 flex items-center gap-3 justify-between"},W={class:"text-xs text-muted"},Z=w({__name:"index",setup(n){const m=q(),a=$(),i=R(),p=a.query.email?.toString(),r=S(atob(p??"")),{state:c,executeImmediate:_}=L(async function(){return await M.sendVerificationEmail({email:r.value,callbackURL:"/token-validation"},{onSuccess:()=>{i.add({color:"success",title:"Success",description:"Email sent successfully"})}})},null);return V(()=>{if(!r.value)throw A({statusCode:400,statusMessage:"We could not verifiy your email due to incomplete data. Try signing up again.",fatal:!0})}),(f,t)=>{const k=N,y=T,x=h,b=D,E=I;return u(),l("div",null,[t[6]||(t[6]=e("h1",{class:"text-lg font-semibold"},"Verify Your Email",-1)),e("div",j," You must verify your email address to continue on "+v(s(m).public.appName)+". ",1),e("div",z,[s(c)?.error?(u(),l("div",F,[o(k,{message:s(c)?.error?.message??s(c)?.error?.statusText,"show-retry":"",onRetry:t[0]||(t[0]=C=>s(_)())},null,8,["message"])])):(u(),l("div",J,[e("div",null,[s(r)?(u(),l("p",P,[t[2]||(t[2]=d(" Email: ")),e("b",null,v(("maskEmail"in f?f.maskEmail:s(Y))(s(r))),1),o(x,{to:{name:"sign-up"}},{default:g(()=>[o(y,{color:"warning",icon:"i-lucide-circle-alert",label:"Not my email",size:"sm",variant:"link",class:"ml-1"})]),_:1})])):B("",!0),o(b,{variant:"subtle",description:`A verification link has been sent to your email. Click on it to
              verify your account.`,icon:"lucide-circle-alert",class:"mt-4"})]),e("div",U,[t[3]||(t[3]=e("p",{class:"text-muted text-sm"},"Didn't receive the email?",-1)),o(y,{"loading-auto":"",label:"Resend",onClick:t[1]||(t[1]=C=>s(_)())})])]))]),e("div",null,[o(E,{class:"my-5"}),e("p",W,[t[5]||(t[5]=d(" Are you experiencing any issues? ")),o(x,{class:"link",to:{name:"contact"}},{default:g(()=>t[4]||(t[4]=[d(" Contact us. ")])),_:1,__:[4]})])])])}}});export{Z as default};
