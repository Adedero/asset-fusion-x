import{cC as K,P as E,l as N,aq as U,S as R,a2 as C,cD as T,cE as g,a5 as x,as as A,cF as k,cG as H,cH as I,cI as F,cJ as B,H as Y,o as $,w as X,L as j,n as q,ac as G,cK as J,X as D,Y as V,aP as z,an as Q,E as _,cL as Z,aM as ee,cM as te,cN as L,ao as ne}from"./BCrY3s8v.js";const oe=K(()=>E([]));function ae(){const e=oe();return{add(t){const n=e.value[0];t!==n&&n?.pause(),e.value=M(e.value,t),e.value.unshift(t)},remove(t){e.value=M(e.value,t),e.value[0]?.resume()}}}function M(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function re(e){return e.filter(t=>t.tagName!=="A")}const ve=N({__name:"FocusScope",props:{loop:{type:Boolean,default:!1},trapped:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["mountAutoFocus","unmountAutoFocus"],setup(e,{emit:t}){const n=e,r=t,{currentRef:i,currentElement:p}=U(),v=E(null),m=ae(),l=R({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}});C(a=>{if(!T)return;const o=p.value;if(!n.trapped)return;function s(f){if(l.paused||!o)return;const y=f.target;o.contains(y)?v.value=y:g(v.value,{select:!0})}function d(f){if(l.paused||!o)return;const y=f.relatedTarget;y!==null&&(o.contains(y)||g(v.value,{select:!0}))}function u(f){o.contains(v.value)||g(o)}document.addEventListener("focusin",s),document.addEventListener("focusout",d);const c=new MutationObserver(u);o&&c.observe(o,{childList:!0,subtree:!0}),a(()=>{document.removeEventListener("focusin",s),document.removeEventListener("focusout",d),c.disconnect()})}),C(async a=>{const o=p.value;if(await x(),!o)return;m.add(l);const s=A();if(!o.contains(s)){const u=new CustomEvent(k,B);o.addEventListener(k,c=>r("mountAutoFocus",c)),o.dispatchEvent(u),u.defaultPrevented||(H(re(I(o)),{select:!0}),A()===s&&g(o))}a(()=>{o.removeEventListener(k,f=>r("mountAutoFocus",f));const u=new CustomEvent(F,B),c=f=>{r("unmountAutoFocus",f)};o.addEventListener(F,c),o.dispatchEvent(u),setTimeout(()=>{u.defaultPrevented||g(s??document.body,{select:!0}),o.removeEventListener(F,c),m.remove(l)},0)})});function h(a){if(!n.loop&&!n.trapped||l.paused)return;const o=a.key==="Tab"&&!a.altKey&&!a.ctrlKey&&!a.metaKey,s=A();if(o&&s){const d=a.currentTarget,[u,c]=J(d);u&&c?!a.shiftKey&&s===c?(a.preventDefault(),n.loop&&g(u,{select:!0})):a.shiftKey&&s===u&&(a.preventDefault(),n.loop&&g(c,{select:!0})):s===d&&a.preventDefault()}}return(a,o)=>($(),Y(q(G),{ref_key:"currentRef",ref:i,tabindex:"-1","as-child":a.asChild,as:a.as,onKeydown:h},{default:X(()=>[j(a.$slots,"default")]),_:3},8,["as-child","as"]))}});var se=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},b=new WeakMap,w=new WeakMap,S={},O=0,P=function(e){return e&&(e.host||P(e.parentNode))},ue=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=P(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},ce=function(e,t,n,r){var i=ue(t,Array.isArray(e)?e:[e]);S[n]||(S[n]=new WeakMap);var p=S[n],v=[],m=new Set,l=new Set(i),h=function(o){!o||m.has(o)||(m.add(o),h(o.parentNode))};i.forEach(h);var a=function(o){!o||l.has(o)||Array.prototype.forEach.call(o.children,function(s){if(m.has(s))a(s);else try{var d=s.getAttribute(r),u=d!==null&&d!=="false",c=(b.get(s)||0)+1,f=(p.get(s)||0)+1;b.set(s,c),p.set(s,f),v.push(s),c===1&&u&&w.set(s,!0),f===1&&s.setAttribute(n,"true"),u||s.setAttribute(r,"true")}catch(y){console.error("aria-hidden: cannot operate on ",s,y)}})};return a(t),m.clear(),O++,function(){v.forEach(function(o){var s=b.get(o)-1,d=p.get(o)-1;b.set(o,s),p.set(o,d),s||(w.has(o)||o.removeAttribute(r),w.delete(o)),d||o.removeAttribute(n)}),O--,O||(b=new WeakMap,b=new WeakMap,w=new WeakMap,S={})}},ie=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=se(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),ce(r,i,n,"aria-hidden")):function(){return null}};function pe(e){let t;D(()=>z(e),n=>{n?t=ie(n):t&&t()}),V(()=>{t&&t()})}const le=Q(()=>{const e=E(new Map),t=E(),n=_(()=>{for(const v of e.value.values())if(v)return!0;return!1}),r=ee({scrollBody:E(!0)});let i=null;const p=()=>{document.body.style.paddingRight="",document.body.style.marginRight="",document.body.style.pointerEvents="",document.documentElement.style.removeProperty("--scrollbar-width"),document.body.style.overflow=t.value??"",L&&i?.(),t.value=void 0};return D(n,(v,m)=>{if(!T)return;if(!v){m&&p();return}t.value===void 0&&(t.value=document.body.style.overflow);const l=window.innerWidth-document.documentElement.clientWidth,h={padding:l,margin:0},a=r.scrollBody?.value?typeof r.scrollBody.value=="object"?te({padding:r.scrollBody.value.padding===!0?l:r.scrollBody.value.padding,margin:r.scrollBody.value.margin===!0?l:r.scrollBody.value.margin},h):h:{padding:0,margin:0};l>0&&(document.body.style.paddingRight=typeof a.padding=="number"?`${a.padding}px`:String(a.padding),document.body.style.marginRight=typeof a.margin=="number"?`${a.margin}px`:String(a.margin),document.documentElement.style.setProperty("--scrollbar-width",`${l}px`),document.body.style.overflow="hidden"),L&&(i=ne(document,"touchmove",o=>de(o),{passive:!1})),x(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})},{immediate:!0,flush:"sync"}),e});function me(e){const t=Math.random().toString(36).substring(2,7),n=le();n.value.set(t,e??!1);const r=_({get:()=>n.value.get(t)??!1,set:i=>n.value.set(t,i)});return Z(()=>{n.value.delete(t)}),r}function W(e){const t=window.getComputedStyle(e);if(t.overflowX==="scroll"||t.overflowY==="scroll"||t.overflowX==="auto"&&e.clientWidth<e.scrollWidth||t.overflowY==="auto"&&e.clientHeight<e.scrollHeight)return!0;{const n=e.parentNode;return!(n instanceof Element)||n.tagName==="BODY"?!1:W(n)}}function de(e){const t=e||window.event,n=t.target;return n instanceof Element&&W(n)?!1:t.touches.length>1?!0:(t.preventDefault&&t.cancelable&&t.preventDefault(),!1)}export{ve as _,pe as a,me as u};
